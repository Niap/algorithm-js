<html>
    <head>
        <title>Algorithm</title>
        <style>
            *{
                margin:0px;
                padding:0px;
            }
            #canvas{
                margin:30px;
            }
        </style>
    </head>
    <body>
        <canvas id="canvas" width="800" height="800" style="border:1px solid #ccc;"></canvas>
        <script>
            var circle = function(x,y,r,vx,vy){
                this.x=x;
                this.y=y;
                this.r=r;
                this.vx = vx;
                this.vy = vy;
                this.move = function(minx,miny,maxx,maxy){
                    this.x += this.vx;
                    this.y += this.vy;
                    this.checkCollision(minx,miny,maxx,maxy);
                }
                this.checkCollision = function(minx,miny,maxx,maxy){
                    if( this.x-this.r <minx ){
                        this.x=this.r;
                        this.vx=-this.vx;
                    }
                    if( this.x+this.r >= maxx ){
                        this.x=maxx-this.r;
                        this.vx=-this.vx;
                    }
                    if( this.y-this.r < miny ){
                        this.y=this.r;
                        this.vy=-this.vy;
                    }
                    if( this.y+this.r >= maxy ){
                        this.y=maxy-this.r;
                        this.vy=-this.vy;
                    }
                }
            }

            const canvas = document.getElementById('canvas');
            const sceneWith = canvas.width;
            const sceneHeight = canvas.width;
            var circles = [];
            var R = 50;
            for(let i=0;i<10;i++){
                var x = parseInt(Math.random()*(sceneWith -2*R)) +R;
                var y = parseInt(Math.random()*(sceneHeight -2*R)) +R;
                var vx = parseInt(Math.random()*11) -5;
                var vy = parseInt(Math.random()*11) -5;
                circles.push(new circle(x,y,R,vx,vy));
            }

            const ctx = canvas.getContext('2d');
            const draw = (axisX) => {
                /* 清空画布(或部分清空) */
                ctx.clearRect(0, 0, sceneWith, sceneHeight);
                ctx.strokeStyle = "#333"
                for(var i=0;i<10;i++){
                    let c = circles[i];
                    ctx.beginPath();
                    ctx.arc(c.x, c.y, c.r, 0, 2 * Math.PI, false);
                    ctx.stroke()
                    c.move(0,0,sceneWith,sceneHeight);
                }
                requestAnimationFrame(draw);
            }
            requestAnimationFrame(draw);
        </script>
    </body>
</html>